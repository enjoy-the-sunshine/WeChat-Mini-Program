<!--pages/add1_choice/add1_choice.wxml-->
<view class="container">
  <!-- å’–å•¡æ¯å‹é€‰æ‹© -->
  <view class="coffee-selection">
    <view class="coffee-item" bindtap="selectCup" data-type="large">
      <view class="coffee-cup large-cup">
        <view class="cup-body"></view>
        <view class="cup-sleeve"></view>
        <view class="steam steam1"></view>
        <view class="steam steam2"></view>
        <view class="steam steam3"></view>
      </view>
      <text class="cup-text">å¤§æ¯</text>
      <view class="add-btn" catchtap="showPercentageModal" data-type="large">+</view>
    </view>

    <view class="coffee-item" bindtap="selectCup" data-type="medium">
      <view class="coffee-cup medium-cup">
        <view class="cup-body"></view>
        <view class="coffee-liquid"></view>
        <view class="steam steam1"></view>
        <view class="steam steam2"></view>
        <view class="steam steam3"></view>
      </view>
      <text class="cup-text">ä¸­æ¯</text>
      <view class="add-btn" catchtap="showPercentageModal" data-type="medium">+</view>
    </view>

    <view class="coffee-item" bindtap="selectCup" data-type="small">
      <view class="coffee-cup small-cup">
        <view class="cup-body"></view>
        <view class="coffee-liquid"></view>
        <view class="saucer"></view>
        <view class="steam steam1"></view>
        <view class="steam steam2"></view>
        <view class="steam steam3"></view>
      </view>
      <text class="cup-text">å°æ¯</text>
      <view class="add-btn" catchtap="showPercentageModal" data-type="small">+</view>
    </view>
  </view>

  <!-- é¥®ç”¨æ—¶é—´è¾“å…¥ -->
  <view class="input-card">
    <view class="input-item">
      <view class="input-icon">ğŸ•</view>
      <text class="input-label">é¥®ç”¨æ—¶é—´</text>
      <picker mode="time" value="{{drinkingTime}}" bindchange="onTimeChange">
        <view class="time-input">{{drinkingTime || 'è¯·é€‰æ‹©æ—¶é—´'}}</view>
      </picker>
    </view>
  </view>

  <!-- å’–å•¡å› å«é‡æ˜¾ç¤º -->
  <view class="input-card">
    <view class="input-item">
      <view class="caffeine-icon">
        <view class="molecule">Câ‚ˆHâ‚â‚€Nâ‚„Oâ‚‚</view>
        <view class="coffee-icon">â˜•</view>
      </view>
      <view class="caffeine-content">
        <text class="input-label">å’–å•¡å› å«é‡</text>
        <view class="caffeine-amount">{{caffeineContent}} mg</view>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-button" bindtap="addCoffee">
    <text>æ·»åŠ </text>
  </view>

  <!-- ç™¾åˆ†æ¯”è¾“å…¥å¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showModal}}" bindtap="hideModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">è¾“å…¥é¥®ç”¨ç™¾åˆ†æ¯”</text>
      </view>
      <view class="modal-body">
        <view class="percentage-input">
          <input type="number" 
                 placeholder="è¯·è¾“å…¥ç™¾åˆ†æ¯”" 
                 value="{{percentageInput}}"
                 bindinput="onPercentageInput"
                 maxlength="3" />
          <text class="percentage-symbol">%</text>
        </view>
        <view class="percentage-slider">
          <slider value="{{percentageSlider}}" 
                  bindchange="onSliderChange" 
                  min="0" 
                  max="100" 
                  step="1" 
                  activeColor="#8B4513" />
          <text class="slider-value">{{percentageSlider}}%</text>
        </view>
      </view>
      <view class="modal-footer">
        <button class="modal-btn cancel-btn" bindtap="hideModal">å–æ¶ˆ</button>
        <button class="modal-btn confirm-btn" bindtap="confirmPercentage">ç¡®è®¤</button>
      </view>
    </view>
  </view>
</view>
